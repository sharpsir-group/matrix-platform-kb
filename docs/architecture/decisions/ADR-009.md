# ADR-009: Why medallion architecture (Bronze/Silver/Gold) for ETL

## Status

Accepted

## Context

Data is ingested from 3 sources (MLS, CRM, internal systems) with different schemas, formats, and update frequencies. The pipeline must normalize into RESO DD 2.0 for the CDL. Options:

- **Single-stage ETL**: Raw → transformed in one step
- **Two-stage**: Raw → staging → final
- **Medallion (Bronze/Silver/Gold)**: Three distinct layers with clear responsibilities

## Decision

Adopt **medallion architecture** in Databricks:

- **Bronze**: Raw data as ingested (strings, JSON, CSV). Immutable, append-only.
- **Silver**: Normalized, typed, deduplicated. Schema aligned per source.
- **Gold**: RESO DD 2.0 unified model. Business-ready for apps and API.

CDC (Change Data Capture) can target individual layers. Each layer is independently rebuildable from the layer below.

## Consequences

**Positive**

- Clear debugging path: trace issues from Gold → Silver → Bronze
- Each layer has a single responsibility; transformations are testable
- Storage overhead (3 copies) is acceptable at current scale (~2,000 listings)
- Incremental processing possible at each layer

**Negative**

- Storage overhead: three copies of data
- Pipeline complexity increases with number of sources and transformations
- Schema changes in Silver or Gold may require backfills
