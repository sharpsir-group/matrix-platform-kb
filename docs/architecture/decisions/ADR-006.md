# ADR-006: Why FastAPI + OData 4.0 for the RESO Web API

## Status

Accepted

## Context

The platform needs an outbound API for external consumers (portals, syndication partners, mobile apps). The RESO Web API standard requires OData 4.0 compliance for query syntax, paging, and metadata.

Options: Build a custom REST API, use an existing OData library, or implement a minimal OData parser.

## Decision

Implement the RESO Web API using **FastAPI (Python)** with a **custom OData 4.0 query parser**. The API:

- Exposes RESO DD 2.0 resources (Property, Member, Office, etc.)
- Parses `$filter`, `$orderby`, `$select`, `$expand`, and `$top`/`$skip`
- Returns JSON responses conforming to OData 4.0 format
- Reads from the CDL (via Databricks Gold layer or direct PostgreSQL, depending on deployment)

## Consequences

**Positive**

- Python ecosystem for data processing, validation, and testing
- OData compliance enables RESO certification and partner integration
- FastAPI provides automatic OpenAPI docs and async support
- Custom parser allows tight control over supported operators and performance

**Negative**

- Custom OData parser adds maintenance burden vs. using a full OData library
- Edge cases (nested filters, complex `$expand`) require ongoing validation
- Python runtime must be hosted separately from Supabase Edge Functions
