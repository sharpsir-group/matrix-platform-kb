# ADR-001: Why Supabase over Firebase/Hasura for CDL

## Status

Accepted

## Context

The Sharp Matrix platform needed an app-facing database for the Common Data Layer (CDL). Three options were evaluated:

- **Firebase**: Real-time capabilities, but NoSQL model and limited query flexibility for relational real estate data
- **Hasura**: GraphQL layer over PostgreSQL, strong for complex queries
- **Supabase**: PostgreSQL with built-in auth, RLS, and Edge Functions

Key requirements included: PostgreSQL for RESO DD compliance, Row Level Security for multi-tenant data isolation, real-time subscriptions for dashboards, and seamless integration with the chosen app builder (Lovable).

## Decision

Select **Supabase** as the CDL database platform, leveraging:

- PostgreSQL for relational schema and RESO DD 2.0 tables
- Edge Functions for serverless API logic (OAuth, admin endpoints)
- Row Level Security (RLS) for permission-aware data access
- Realtime for live updates on listings and dashboards

## Consequences

**Positive**

- Native Lovable integration — Supabase is the default backend for Lovable-generated apps
- Full PostgreSQL ecosystem: extensions, JSONB, full-text search
- RLS aligns with the 5-level scope hierarchy for team-aware queries
- Single vendor for DB + auth + serverless functions

**Negative**

- Vendor dependency on Supabase; migration would require significant effort
- Edge Functions use Deno runtime, not Node.js — smaller ecosystem and different import patterns
- Supabase free tier limits may constrain development and staging environments
