# ADR-010: Why PM2 + cron over Kubernetes/ECS for pipeline orchestration

## Status

Accepted

## Context

The platform runs the RESO Web API and a CDC pipeline on a single server. A small team needs simple, reliable orchestration. Options:

- **Kubernetes**: Full orchestration, overkill for current scale
- **ECS/Fargate**: Managed containers, additional AWS setup and cost
- **PM2 + cron**: Process manager + scheduled jobs on existing server

## Decision

Use **PM2** for API process management and **cron** for scheduled pipeline runs:

- PM2: Keeps the FastAPI RESO Web API running, handles restarts, basic logging
- Cron: Triggers Databricks jobs or CDC scripts on schedule (e.g., hourly, daily)

No container orchestration; processes run directly on the host.

## Consequences

**Positive**

- Simple setup; zero additional infrastructure
- Adequate for current scale (~2,000 listings, 3 markets)
- Easy to debug and modify — no YAML, no cluster config
- Low operational overhead for a small team

**Negative**

- No auto-scaling; manual intervention if load increases
- Single point of failure — server outage affects both API and pipeline
- Will need to revisit (e.g., move to ECS or Kubernetes) if scale grows significantly or high availability is required
